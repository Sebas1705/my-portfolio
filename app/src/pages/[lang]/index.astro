---
import Layout from '../../presentation/layouts/Layout.astro';
import Header from '../../presentation/components/Header.astro';
import Hero from '../../presentation/components/Hero.astro';
import Skills from '../../presentation/components/Skills.astro';
import SoftSkills from '../../presentation/components/SoftSkills.astro';
import About from '../../presentation/components/About.astro';
import WorkExperience from '../../presentation/components/WorkExperience.astro';
import Education from '../../presentation/components/Education.astro';
import Projects from '../../presentation/components/Projects.astro';
import Courses from '../../presentation/components/Courses.astro';
import Contact from '../../presentation/components/Contact.astro';
import Footer from '../../presentation/components/Footer.astro';

import type { Language } from '@/domain';
import { supportedLanguages, translate } from '@/domain';

export async function getStaticPaths() {
    return supportedLanguages.map((lang) => ({ params: { lang } }));
}
const lang: Language = Astro.params.lang as Language;

import { InMemoryPersonalInfoRepository, InMemoryCommonLabelsRepository } from '@/data';
import { GetPersonalInfoUseCase, GetCommonLabelsUseCase } from '@/domain';

const personalInfo = await new GetPersonalInfoUseCase(new InMemoryPersonalInfoRepository()).execute();
const commonLabels = await new GetCommonLabelsUseCase(new InMemoryCommonLabelsRepository()).execute();
---

<Layout lang={lang} title={`${personalInfo.name} - ${translate(personalInfo.title, lang)}`} description={translate(personalInfo.bio, lang)}>
    <Header lang={lang} personalInfo={personalInfo} />
    
    <main class="page-home">
        <Hero lang={lang} personalInfo={personalInfo} />
        <Skills commonLabels={commonLabels} lang={lang}/>
        <SoftSkills lang={lang} />
        <About lang={lang} personalInfo={personalInfo} />
        <WorkExperience commonLabels={commonLabels} lang={lang} />
        <Education commonLabels={commonLabels} lang={lang} />
        <Courses commonLabels={commonLabels} lang={lang} />
        <Projects lang={lang} />
        <Contact lang={lang} personalInfo={personalInfo} />
    </main>

    <Footer lang={lang} />
</Layout>
