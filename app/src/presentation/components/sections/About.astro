---
import type { Language, PersonalInfo } from '@/domain';
import { translate } from '@/domain';
import Section from '../common/Section.astro';

interface Props {
    lang: Language;
    personalInfo: PersonalInfo;
}

const { lang, personalInfo } = Astro.props;

import { InMemoryAboutLabelsRepository } from '@/data';
import { GetAboutLabelsUseCase } from '@/domain';

const aboutLabels = await new GetAboutLabelsUseCase(new InMemoryAboutLabelsRepository()).execute();
---

<Section id="about" class="relative" title={translate(aboutLabels.title, lang)} subtitle={translate(aboutLabels.subtitle, lang)}>
    <div class="relative bg-slate-100 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-xl p-6 md:p-12 overflow-hidden transition-all duration-200 shadow-md hover:shadow-lg hover:border-blue-500 animate-fadeInUp">
    <!-- animated border -->
    <div class="animated-border pointer-events-none absolute inset-0 rounded-xl opacity-0 hover:opacity-100"></div>

        <div class="grid md:grid-cols-2 gap-6 md:gap-8 relative z-10">
            <div class="md:pr-8 md:border-r md:border-gray-200 dark:md:border-slate-700 md:pb-0 pb-4">
                <div class="leading-relaxed text-slate-600 dark:text-slate-300">
                    {(() => {
                        const paragraphs = translate(personalInfo.description, lang).split('\n\n');
                        return <p class="m-0 text-[1.05rem] opacity-0 animate-slideIn text-slate-900 dark:text-slate-100 font-medium" style="animation-delay: 0s">{paragraphs[0]}</p>;
                    })()}
                </div>
            </div>

            <div class="flex flex-col gap-4">
                <div class="leading-relaxed text-slate-600 dark:text-slate-300">
                    {(() => {
                        const paragraphs = translate(personalInfo.description, lang).split('\n\n');
                        return (
                            <>
                                {paragraphs.slice(1).map((paragraph, index) => (
                                    <p class="m-0 text-sm opacity-0 animate-slideIn text-slate-600 dark:text-slate-300" style={`animation-delay: ${(index + 1) * 0.15}s`}>{paragraph}</p>
                                ))}
                            </>
                        );
                    })()}
                </div>
            </div>
        </div>
    </div>
</Section>

<style>
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
    .animate-fadeInUp { animation: fadeInUp 0.8s ease-out 0.2s both; }

    @keyframes slideIn { from { opacity: 0; transform: translateX(-20px); } to { opacity: 1; transform: translateX(0); } }
    .animate-slideIn { animation: slideIn 0.6s ease-out forwards; }

    .animated-border {
        background: linear-gradient(90deg, transparent, rgba(59,130,246,0.9) 20%, transparent 50%, rgba(139,92,246,0.9) 80%, transparent) border-box;
        -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        -webkit-mask-composite: xor;
        mask-composite: exclude;
        animation: borderFlow 4s linear infinite;
    }
    @keyframes borderFlow { 0% { background-position: 200% center; } 100% { background-position: -200% center; } }
</style>
