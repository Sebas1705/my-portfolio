---
---

<div class="theme-toggle-wrapper">
  <input 
    type="checkbox" 
    id="theme-toggle" 
    class="theme-toggle-input"
    aria-label="Toggle theme"
  />
  <label for="theme-toggle" class="theme-toggle-label">
    <svg class="sun-icon" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
      <path d="M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM18.894 6.166a.75.75 0 00-1.06-1.06l-1.591 1.59a.75.75 0 101.06 1.061l1.591-1.59zM21.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5H21a.75.75 0 01.75.75zM17.834 18.894a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 10-1.061 1.06l1.59 1.591zM12 18a.75.75 0 01.75.75V21a.75.75 0 01-1.5 0v-2.25A.75.75 0 0112 18zM7.758 17.303a.75.75 0 00-1.061-1.06l-1.591 1.59a.75.75 0 001.06 1.061l1.591-1.59zM6 12a.75.75 0 01-.75.75H3a.75.75 0 010-1.5h2.25A.75.75 0 016 12zM6.697 7.757a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 00-1.061 1.06l1.59 1.591z"/>
    </svg>
    <svg class="moon-icon" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
      <path d="M9.528 1.718a.75.75 0 01.162.819A8.97 8.97 0 009 6a9 9 0 009 9 8.97 8.97 0 003.463-.69.75.75 0 01.981.98 10.503 10.503 0 01-9.694 6.46c-5.799 0-10.5-4.701-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 01.818.162z"/>
    </svg>
    <div class="toggle-slider"></div>
  </label>
</div>

<style>
  .theme-toggle-wrapper {
    display: flex;
    align-items: center;
  }

  .theme-toggle-input {
    display: none;
  }

  .theme-toggle-label {
    position: relative;
    display: flex;
    align-items: center;
    width: 60px;
    height: 32px;
    background-color: var(--color-bg-secondary);
    border: 2px solid var(--color-primary);
    border-radius: 50px;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    padding: 4px;
  }

  .theme-toggle-label:hover {
    transform: scale(1.05);
  }

  .theme-toggle-label:active {
    transform: scale(0.98);
  }

  .toggle-slider {
    position: absolute;
    width: 24px;
    height: 24px;
    background-color: var(--color-primary);
    border-radius: 50%;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    left: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  }

  .sun-icon,
  .moon-icon {
    position: absolute;
    transition: opacity 0.3s ease, transform 0.3s ease, filter 0.3s ease;
    pointer-events: none;
  }

  .sun-icon {
    left: 7px;
    opacity: 1;
    transform: rotate(0deg) scale(1);
    color: #fbbf24;
    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));
  }

  .moon-icon {
    right: 7px;
    opacity: 0.3;
    transform: rotate(-20deg) scale(0.8);
    color: #64748b;
  }

  .theme-toggle-input:checked + .theme-toggle-label .toggle-slider {
    transform: translateX(28px);
  }

  .theme-toggle-input:checked + .theme-toggle-label .sun-icon {
    opacity: 0.3;
    transform: rotate(90deg) scale(0.8);
    color: #fbbf24;
    filter: none;
  }

  .theme-toggle-input:checked + .theme-toggle-label .moon-icon {
    opacity: 1;
    transform: rotate(0deg) scale(1);
    color: #818cf8;
    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));
  }

  [data-theme="dark"] .theme-toggle-label {
    background-color: var(--color-bg-secondary);
  }

  [data-theme="dark"] .toggle-slider {
    background-color: var(--color-primary);
  }
</style>

<script>
  const themeToggle = document.getElementById('theme-toggle') as HTMLInputElement;
  
  function updateToggleState() {
    const currentTheme = document.documentElement.getAttribute('data-theme');
    if (themeToggle) {
      themeToggle.checked = currentTheme === 'dark';
    }
  }

  // Initialize toggle state on page load
  updateToggleState();
  
  if (themeToggle) {
    themeToggle.addEventListener('change', () => {
      const newTheme = themeToggle.checked ? 'dark' : 'light';
      
      document.documentElement.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
    });
  }
</script>
