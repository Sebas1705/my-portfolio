---
import type { WorkExperience, Language, CommonLabels } from '@/domain';
import { translate } from '@/domain';
import { formatDateRange } from '@/core';

interface Props {
    experience: WorkExperience;
    lang: Language;
    commonLabels: CommonLabels;
}

const { experience, lang, commonLabels } = Astro.props;
---
<div class="flex items-start gap-4">
    <div class="flex-shrink-0">
        <div class="w-3 h-3 rounded-full bg-sky-600 mt-1.5" aria-hidden="true"></div>
    </div>
    <div class="flex-1">
        <div class="flex justify-between items-start gap-4">
            <div>
                <h3 class="text-lg font-semibold text-slate-800 dark:text-slate-100">{translate(experience.position, lang)}</h3>
                <p class="text-sm text-slate-600 dark:text-slate-300 mt-1">
                    {experience.companyUrl ? (
                        <a href={experience.companyUrl} target="_blank" rel="noopener noreferrer" class="text-sky-600 hover:text-sky-700 font-medium">
                            {experience.company}
                        </a>
                    ) : (
                        <span class="font-medium text-slate-700 dark:text-slate-200">{experience.company}</span>
                    )}
                </p>
            </div>
            <div class="text-right text-sm text-slate-500">
                <div class="font-semibold">{formatDateRange(experience.startDate, experience.endDate, lang, translate(commonLabels.current, lang))}</div>
                <div>{experience.location}</div>
            </div>
        </div>
        <p class="text-slate-600 dark:text-slate-300 mt-3">{translate(experience.description, lang)}</p>
        <a href={`/${lang}/work/${experience.id}`} class="inline-block text-sky-600 font-semibold mt-3 hover:text-sky-700">
            {translate(commonLabels.viewMore, lang)} â†’
        </a>
    </div>
</div>
