---
import type { Language } from '@domain/entities/Language';
import type { PersonalInfo } from '@domain/entities/PersonalInfo';
import { translate } from '@infrastructure/i18n';

interface Props {
  lang: Language;
  personalInfo: PersonalInfo;
}

const { lang } = Astro.props;
---

<section id="about" class="section about-section">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title" data-i18n-key="about.title">{translate(lang, 'about.title')}</h2>
      <p class="section-subtitle" data-i18n-key="about.subtitle">{translate(lang, 'about.subtitle')}</p>
    </div>

    <div class="about-content">
      <div class="about-card">
        {/* Borde animado */}
        <div class="animated-border"></div>
        
        <div class="card-content">
          <div class="left-column">
            <div class="description-content" data-i18n-key="about.description">
              {(() => {
                const paragraphs = translate(lang, 'about.description').split('\n\n');
                return <p class="description-paragraph main-paragraph" style="animation-delay: 0s">{paragraphs[0]}</p>;
              })()}
            </div>
          </div>
          
          <div class="right-column">
            <div class="description-content" data-i18n-key="about.description">
              {(() => {
                const paragraphs = translate(lang, 'about.description').split('\n\n');
                return (
                  <>
                    {paragraphs.slice(1).map((paragraph, index) => (
                      <p class="description-paragraph secondary-paragraph" style={`animation-delay: ${(index + 1) * 0.15}s`}>{paragraph}</p>
                    ))}
                  </>
                );
              })()}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .about-section {
    background: linear-gradient(135deg, var(--color-bg-primary) 0%, var(--color-bg-secondary) 100%);
    position: relative;
  }

  .section-header {
    text-align: center;
    margin-bottom: var(--spacing-3xl);
    animation: fadeInDown 0.6s ease-out;
  }

  @keyframes fadeInDown {
    from {
      opacity: 0;
      transform: translateY(-20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .about-content {
    max-width: 1000px;
    margin: 0 auto;
  }

  .about-card {
    position: relative;
    background: var(--color-bg-tertiary);
    border: 2px solid var(--color-border);
    border-radius: var(--radius-xl);
    padding: var(--spacing-3xl);
    overflow: hidden;
    transition: all var(--transition-base);
    animation: fadeInUp 0.8s ease-out 0.2s both;
    box-shadow: 0 10px 30px rgba(59, 130, 246, 0.1);
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .about-card:hover {
    box-shadow: 0 15px 40px rgba(59, 130, 246, 0.2);
    border-color: var(--color-primary);
  }

  /* Borde animado */
  .animated-border {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 2px solid transparent;
    border-radius: var(--radius-xl);
    pointer-events: none;
    background: linear-gradient(90deg, 
      transparent,
      var(--color-primary) 20%,
      transparent 50%,
      var(--color-secondary) 80%,
      transparent
    ) border-box;
    animation: borderFlow 4s linear infinite;
    opacity: 0;
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
  }

  .about-card:hover .animated-border {
    opacity: 1;
  }

  @keyframes borderFlow {
    0% {
      background-position: 200% center;
    }
    100% {
      background-position: -200% center;
    }
  }

  .card-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-2xl);
    position: relative;
    z-index: 1;
  }

  @media (max-width: 768px) {
    .card-content {
      grid-template-columns: 1fr;
      gap: var(--spacing-lg);
    }
  }

  .left-column {
    border-right: 2px solid var(--color-border);
    padding-right: var(--spacing-xl);
  }

  @media (max-width: 768px) {
    .left-column {
      border-right: none;
      border-bottom: 2px solid var(--color-border);
      padding-right: 0;
      padding-bottom: var(--spacing-lg);
    }
  }

  .right-column {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-lg);
  }

  .description-content {
    line-height: 1.8;
    color: var(--color-text-secondary);
  }

  .description-paragraph {
    margin: 0;
    font-size: 1.05rem;
    opacity: 0;
    animation: slideIn 0.6s ease-out forwards;
  }

  .main-paragraph {
    font-size: 1.15rem;
    font-weight: 500;
    color: var(--color-text-primary);
  }

  .secondary-paragraph {
    font-size: 0.95rem;
    color: var(--color-text-secondary);
  }

  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateX(-20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  /* Responsive */
  @media (max-width: 768px) {
    .about-card {
      padding: var(--spacing-xl);
    }

    .description-paragraph {
      font-size: 1rem;
    }

    .main-paragraph {
      font-size: 1.05rem;
    }

    .secondary-paragraph {
      font-size: 0.9rem;
    }
  }
</style>
